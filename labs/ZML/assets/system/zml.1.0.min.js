var ZML={};ZML.init=function(a){$(document).ready(function(){ZML.UserSelectControl.init();ZML.Preloader.init();ZML.Application.init(a);ZML.AssetsManager.init()})};function trace(a){console.log(a)};ZML.UserSelectControl={init:function(){$(document.body).css("-moz-user-select","none");$(document.body).css("-webkit-user-select","none");$(document.body).css("-ms-user-select","none");$(document.body).css("-khtml-user-select","none");$(document.body).css("user-select","none")}};ZML.Loading=function(){function a(){this.width=120;this.height=12;this.view=$("<div>");this.view.css("width",this.width+"px");this.view.css("height",this.height+"px");this.view.css("border","solid 1px");this.view.css("position","absolute");this.view.css("border-radius","10px");this.view.css("box-sizing","initial");this.bar=$("<div>");this.bar.css("left","1px");this.bar.css("top","1px");this.bar.css("width","0px");this.bar.css("height",this.height-2+"px");this.bar.css("position","absolute");this.bar.css("border-radius",
"10px");this.bar.appendTo(this.view);this.info=$("<div>Loading - 0%</div>");this.info.css("font-family","arial");this.info.css("position","absolute");this.info.css("font-size","12px");this.info.css("line-height","12px");this.info.css("top","-16px");this.info.css("left","2px");this.info.appendTo(this.view);this.setColor("#fff")}a.prototype.setColor=function(b){this.view.css("border-color",b);this.bar.css("background",b);this.info.css("color",b)};a.prototype.progress=function(b){this.bar.css("width",
118*b/100+"px");this.info.text("Loading - "+Math.round(b)+"%")};return a}();ZML.Preloader=function(){function a(){}a.loading=null;a.progress=0;a.init=function(){a.loading=new ZML.Loading};a.appendProgress=function(b){a.progress+=b;a.loading.progress(a.progress)};a.complete=function(){a.loading.view.remove()};return a}();ZML.CoreURL={app:"assets/app/",system:"assets/system/",systemConfig:"config.xml",appRoot:"Application.xml"};ZML.CoreEvent={APP_DATA_READY:"applicationDataReady",ASSETS_READY:"assetsReady"};ZML.Compatible=function(){var a=function(){};a.list=["Firefox","Chrome"];a.browser=function(){for(var b="unknown",c=navigator.userAgent,d=a.list.length,e=0;e<d;e++)if(c.indexOf(a.list[e])>-1){b=a.list[e];break}return b};return a}();ZML.Event=function(a,b){this.type=a;this.data=b};ZML.CanvasEvent=function(){function a(){}a.prototype=new ZML.Event("CanvasEvent");a.prototype.construct=function(b){this.data=b};return a}();ZML.MovieClipEvent=function(){function a(){}a.prototype=new ZML.Event("MovieClipEvent");a.prototype.construct=function(b){this.data=b};return a}();ZML.NavigationEvent=function(){function a(){}a.prototype=new ZML.Event("NavigationEvent");a.prototype.construct=function(b){this.data=b};return a}();ZML.Events=function(){function a(){this.data=null;a.arr.push(this)}a.arr=[];a.prototype.construct=function(b){this.data=b};a.getEventsById=function(b){for(var c=null,d=a.arr.length;d--;){var e=a.arr[d];if(e.data.attr("id")==b){c=e;break}}return c};return a}();ZML.VideoEvent=function(){function a(){}a.prototype=new ZML.Event("VideoEvent");a.prototype.construct=function(b){this.data=b};return a}();ZML.BroadcastCenter=function(){var a={dispatchEvent:function(b){$(document).trigger(b.type,b.data)},addEventListener:function(b,a){$(document).bind(b,a)}};a.sendEvent=function(b){for(var b=$(b).children(),c=b.length,d=0;d<c;d++){var e=b[d].nodeName;e=="EVENTS"?(e=$(b[d]).attr("src"),e=ZML.Events.getEventsById(e),a.sendEvent(e.data.prop("outerHTML"))):(e=ZML.FactoryMap[e],e!=void 0&&(e=new e,e.construct($(b[d])),a.dispatchEvent(e)))}};return a}();ZML.AssetsManager=function(){var a={appData:null,configData:null,loadList:[]};a.init=function(){function b(b){function c(a){if(a==j)b();else{var e=$(i[a]).prop("nodeName").toUpperCase();e=="SCRIPT"?f(a,g):e=="LINK"&&h(a,g)}}function f(b,a){var c=$(i[b]).attr("src"),d=document.createElement("script");d.src=c;document.getElementsByTagName("head")[0].appendChild(d);d.onload=function(){a(b)}}function h(b,a){var c=$(i[b]);c.get(0).onload=function(){a(b)};c.appendTo("head")}function g(b){ZML.Preloader.appendProgress(40/
j);b++;c(b)}var i=$(a.configData).last().children("import").eq(0).children(),j=i.length;j>0?c(0):(ZML.Preloader.appendProgress(40),b())}function c(b){$.get(ZML.CoreURL.app+ZML.CoreURL.appRoot,function(c){a.appData=c;ZML.Preloader.appendProgress(5);b()},"text")}(function(b){$.get(ZML.CoreURL.system+ZML.CoreURL.systemConfig,function(c){a.configData=c;ZML.Preloader.appendProgress(5);b()},"text")})(function(){b(function(){c(function(){ZML.BroadcastCenter.dispatchEvent(new ZML.Event(ZML.CoreEvent.APP_DATA_READY))})})})};
a.appendToLoad=function(b,c){a.loadList.push({url:b,onComplete:c})};a.assetsLoadStart=function(){function b(b){if(b==h)f();else{var i=a.loadList[b].url,j=a.loadList[b].onComplete;d(i)?c(i,function(a){j(a);e(b)}):$.get(i,function(a){j(a);e(b)})}}function c(b,a){var c=new Image;c.onload=function(){a(c)};c.src=b}function d(b){for(var a=!1,c=["jpg","jpeg","png","gif"],d=c.length;d--;)if(b.indexOf(c[d])>-1){a=!0;break}return a}function e(a){ZML.Preloader.appendProgress(45/h);a++;b(a)}function f(){ZML.Preloader.complete();
ZML.BroadcastCenter.dispatchEvent(new ZML.Event(ZML.CoreEvent.ASSETS_READY))}ZML.Preloader.appendProgress(5);var h=a.loadList.length;h>0?b(0):(ZML.Preloader.appendProgress(45),f())};return a}();ZML.ButtonEffectMap={};ZML.RootContainer=function(a){function b(){if(a.width!=void 0&&a.height!=void 0){var b=a.width,e=a.height,f=$(window).width(),h=$(window).height(),g=b/f>e/h?f/b:h/e,h=(h-e*g)*0.5;c.view.css("left",(f-b*g)*0.5);c.view.css("top",h);c.view.width(b*g);c.view.height(e*g);c.contentLayer.data("scale",g);switch(c.scaleStyle){case "zoom":c.contentLayer.css("zoom",g);break;case "transform":c.contentLayer.css("transform","matrix("+g+",0,0,"+g+",0,0)")}}else c.contentLayer.width("100%"),c.contentLayer.height("100%"),
c.view.width("100%"),c.view.height("100%");ZML.Preloader.loading.view.css("left",(c.view.width()-ZML.Preloader.loading.width)*0.5+"px");ZML.Preloader.loading.view.css("top",(c.view.height()-ZML.Preloader.loading.height)*0.5+"px")}var c=this,a=a==void 0?{}:a;this.view=$("<div>",{style:"position:absolute;overflow:hidden;"});this.view.appendTo("body");this.view.css("background",a.background!=void 0?a.background:"#000");this.contentLayer=$("<div>",{style:"position:absolute;"});this.contentLayer.appendTo(this.view);
a.loading!=void 0&&ZML.Preloader.loading.setColor(a.loading);ZML.Preloader.loading.view.appendTo(this.view);this.scaleStyle=a.scaleStyle==void 0?"transform":a.scaleStyle;$(window).resize(b);b(null)};ZML.ImageAsset=function(){function a(){this.image=this.url=this.data=null;a.list.push(this)}a.list=[];a.prototype.construct=function(b){var a=this;this.data=b;this.url=ZML.CoreURL.app+this.data.attr("url");ZML.AssetsManager.appendToLoad(this.url,function(b){a.image=b})};a.getImageById=function(b){for(var c=null,d=a.list.length,e=0;e<d;e++){var f=a.list[e];if(f.data.attr("id")==b){c=f;break}}return c};return a}();ZML.BasicCanvas=function(){function a(b){if(b==void 0)this.view=$("<div />"),this.view.css("position","absolute"),this.data=null;else return a.select(b)}ZML.find=a;a.list=[];a.select=function(b){b.indexOf("#")==0?(b=b.slice(1,b.length),b=a.selectCanvasById(b)):b=a.selectCanvasByTag(b);return b};a.selectCanvasById=function(b){for(var c,d=a.list.length;d--;){var e=a.list[d];if(e.data.attr("id")==b){c=e;break}}return c};a.selectCanvasByTag=function(b){function c(b,a){for(var d=[],f=e[b].split(":"),k=
a.length;k--;){var l=a[k],m=l.data.attr(f[0]);m!=void 0&&m==f[1]&&d.push(l)}d.length>0&&b+1<e.length&&(d=c(b+1,d));return d}for(var d=[],e=b.split(","),b=a.list.length;b--;){var f=a.list[b];f.data.prop("nodeName").toUpperCase()==e[0].toUpperCase()&&d.push(f)}e.length>1&&(d=c(1,d));return d};a.prototype.construct=function(b){a.list.push(this);this.data=b;this.mappingCss(this.data);this.initEvents();this.createChildren()};a.prototype.initEvents=function(){var b=this;ZML.BroadcastCenter.addEventListener(ZML.CanvasEvent.prototype.type,
function(a,d){if(!($(d).attr("id")==void 0||$(d).attr("id")!=b.data.attr("id"))){var e=$(d).attr("action");e!=void 0&&e=="set"&&b.mappingCss($(d))}})};a.prototype.mappingCss=function(b){for(var b=b.prop("attributes"),a=b.length,d=0;d<a;d++){var e=b[d].nodeName,f=b[d].value;this.handleSpecialNode(e,f)||this.view.css(e,f)}};a.prototype.handleSpecialNode=function(b,a){var d=!1;switch(b.toLowerCase()){case "id":this.view.attr(b,a);d=!0;break;case "class":this.view.toggleClass(a);d=!0;break;case "x":this.view.css("left",
a+"px");d=!0;break;case "y":this.view.css("top",a+"px");d=!0;break;case "width":this.view.width(a);break;case "height":this.view.height(a);break;case "action":d=!0;break;case "scalex":this.scaleX(a);d=!0;break;case "scaley":this.scaleY(a);d=!0;break;case "rotate":this.rotate(a);d=!0;break;case "alpha":this.alpha(a);d=!0;break;case "visible":this.visible(a),d=!0}return d};a.prototype.createChildren=function(){function b(b){if(b==e)return d.constructComplete();var h=d.data.children().get(b),g=h.nodeName.toUpperCase(),
g=ZML.FactoryMap[g];g==void 0?a(b):(g=new g,g.view!=void 0?(g.view.appendTo(d.view),g.onReady=function(){a(b)},g.construct($(h))):(g.construct($(h)),a(b)))}function a(c){c++;b(c)}var d=this,e=this.data.children().length;e>0?b(0):this.constructComplete()};a.prototype.constructComplete=function(){ZML.BroadcastCenter.sendEvent(this.data.children("Ready").prop("outerHTML"));if(this.onReady!=void 0)this.onReady()};a.prototype.buttonMode=function(b){this.view.css("cursor",b?"pointer":"auto")};a.prototype.visible=
function(b){this.view[b=="true"?"show":"hide"]()};a.prototype.scaleX=function(){};a.prototype.scaleY=function(){};a.prototype.rotate=function(){};a.prototype.alpha=function(){};return a}();ZML.BasicMovieClip=function(){function a(){this.view=this.view.clone();this.currentFrame=0;this.interval=null;this.frameRate=60}a.prototype=new ZML.BasicCanvas;a.prototype.constructComplete=function(){this.init();ZML.BasicCanvas.prototype.constructComplete.call(this)};a.prototype.init=function(){var b=this;if(this.data.attr("frameRate")!=void 0)this.frameRate=Number(this.data.attr("frameRate"));this.children=this.view.children().toArray();for(var a=this.children.length,d=0;d<a;d++)$(this.children[d]).detach();
$(this.children[0]).appendTo(this.view);this.data.attr("gotoAndStop")!=void 0?this.gotoAndStop(Number(this.data.attr("gotoAndStop"))):this.data.attr("gotoAndPlay")!=void 0?this.gotoAndPlay(Number(this.data.attr("gotoAndPlay"))):this.startInterval();ZML.BroadcastCenter.addEventListener(ZML.MovieClipEvent.prototype.type,function(a,c){if($(c).attr("id")==b.data.attr("id"))switch($(c).attr("action")){case "play":b.play();break;case "stop":b.stop();break;case "gotoAndStop":b.gotoAndStop(Number($(c).attr("frame")));
break;case "gotoAndPlay":b.gotoAndPlay(Number($(c).attr("frame")))}})};a.prototype.startInterval=function(){var b=this;this.interval=setInterval(function(){b.EnterFrame()},1E3/this.frameRate)};a.prototype.clearInterval=function(){clearInterval(this.interval);this.interval=null};a.prototype.setFrame=function(b){$(this.children[this.currentFrame]).detach();$(this.children[b]).appendTo(this.view);this.currentFrame=b};a.prototype.EnterFrame=function(){var b=this.currentFrame+1,a=this.children.length;
b>a-1&&(b-=a);this.setFrame(b)};a.prototype.play=function(){this.interval==null&&this.startInterval()};a.prototype.stop=function(){this.interval!=null&&this.clearInterval()};a.prototype.gotoAndStop=function(b){this.stop();this.setFrame(b)};a.prototype.gotoAndPlay=function(b){this.setFrame(b);this.play()};return a}();ZML.Application=function(){function a(){this.view=this.view.clone()}a.prototype=new ZML.BasicCanvas;a._instance=null;a.instance=function(){if(a._instance==null)a._instance=new a;return a._instance};a.init=function(b){var c=a.instance();c.container=new ZML.RootContainer(b);ZML.BroadcastCenter.addEventListener(ZML.CoreEvent.APP_DATA_READY,function(){c.onReady=function(){ZML.AssetsManager.assetsLoadStart()};c.view.css("visibility","hidden");c.view.css("opacity",0);c.view.css("pointer-events","none");
c.view.appendTo(c.container.contentLayer);c.construct($(ZML.AssetsManager.appData).last())});ZML.BroadcastCenter.addEventListener(ZML.CoreEvent.ASSETS_READY,function(){c.view.css("visibility","");c.view.css("pointer-events","");c.view.css("opacity",1);ZML.BroadcastCenter.sendEvent(c.data.children("Add").prop("outerHTML"))})};return a}();ZML.BasicComponent=function(){function a(){this.view=this.view.clone();this.url=null}a.prototype=new ZML.BasicCanvas;a.prototype.constructComplete=function(){var b=this;this.url=ZML.CoreURL.app+this.data.attr("url");$.get(this.url,function(a){b.constructChildren(a)},"text")};a.prototype.constructChildren=function(b){var a=this,b=$(b).last(),d=b.prop("nodeName").toUpperCase(),d=new ZML.FactoryMap[d];d.view.prependTo(this.view);d.onReady=function(){a.childrenConstructComplete()};d.construct(b)};a.prototype.childrenConstructComplete=
function(){ZML.BasicCanvas.prototype.constructComplete.call(this)};return a}();ZML.HtmlCanvas=function(){function a(){this.view=this.view.clone()}a.prototype=new ZML.BasicCanvas;a.prototype.construct=function(b){ZML.BasicCanvas.list.push(this);this.data=b;ZML.BasicCanvas.prototype.mappingCss.call(this,b);this.initEvents();this.view.html(this.data.html());ZML.BasicCanvas.prototype.constructComplete.call(this)};a.prototype.initEvents=function(){ZML.BasicCanvas.prototype.initEvents.call(this);var b=this;ZML.BroadcastCenter.addEventListener(ZML.CanvasEvent.prototype.type,function(a,
d){if(!($(d).attr("id")==void 0||$(d).attr("id")!=b.data.attr("id"))){var e=$(d).attr("action");e!=void 0&&e=="set"&&(e=$(d).attr("html"),e!=void 0&&b.view.html($(d).children(e).html()))}})};return a}();ZML.ImageCanvas=function(){function a(){this.view=this.view.clone();this.__image=new ZML.BasicCanvas}a.prototype=new ZML.BasicCanvas;a.prototype.constructComplete=function(){var b=this;if(this.data.attr("source")!=void 0)ZML.BroadcastCenter.addEventListener(ZML.CoreEvent.ASSETS_READY,function(){var a=ZML.ImageAsset.getImageById(b.data.attr("source")),a=$(a.image).clone();b.addImage(a)});else{var a=ZML.CoreURL.app+this.data.attr("url"),d=this.data.attr("preload");d!=void 0&&d=="true"?ZML.AssetsManager.appendToLoad(a,
function(a){b.addImage($(a))}):this.addImage($("<img>",{src:a}))}ZML.BasicCanvas.prototype.constructComplete.call(this)};a.prototype.addImage=function(a){a.attr("ondragstart","return false;");this.__image.view=a;a.css("position","absolute");var c=this.data.attr("img");if(c!=void 0)for(var c=c.split(","),d=c.length,e=0;e<d;e++){var f=c[e].split(":");ZML.BasicCanvas.prototype.handleSpecialNode.call(this.__image,f[0],f[1])||a.css(f[0],f[1])}a.prependTo(this.view)};return a}();ZML.Button=function(){function a(){this.view=this.view.clone();this.effectInstance=null}a.prototype=new ZML.BasicCanvas;a.prototype.constructComplete=function(){this.init();ZML.BasicCanvas.prototype.constructComplete.call(this)};a.prototype.init=function(){this.buttonMode(!0);var a=this.data.attr("effect");a!=void 0&&this.effect(a);this.bindEvents();this.data.attr("enabled")!=void 0&&this.enabled(this.data.attr("enabled")=="true"?!0:!1)};a.prototype.initEvents=function(){ZML.BasicCanvas.prototype.initEvents.call(this);
this.initSelfEvents()};a.prototype.initSelfEvents=function(){var a=this;ZML.BroadcastCenter.addEventListener(ZML.CanvasEvent.prototype.type,function(c,d){if(!($(d).attr("id")==void 0||$(d).attr("id")!=a.data.attr("id"))){var e=$(d).attr("action");e!=void 0&&e=="set"&&$(d).attr("enabled")!=void 0&&a.enabled($(d).attr("enabled")=="true"?!0:!1)}})};a.prototype.bindEvents=function(){var a=this;this.view.bind("click",function(){a.clickHandler()})};a.prototype.effect=function(a){if(a!=null){if(a=ZML.ButtonEffectMap[a],
a!=void 0&&this.effectInstance==null)this.effectInstance=new a(this)}else if(this.effectInstance!=null)this.effectInstance.dispose(),this.effectInstance=null};a.prototype.clickHandler=function(){var a=this.data.children("Click").prop("outerHTML");ZML.BroadcastCenter.sendEvent(a)};a.prototype.enabled=function(a){this.buttonMode(a);this.alpha(a?1:0.5);this.view.css("pointer-events",a?"":"none")};return a}();ZML.ImageButton=function(){function a(){this.view=this.view.clone()}a.prototype=new ZML.ImageCanvas;a.prototype.constructComplete=function(){a.prototype.clickHandler=ZML.Button.prototype.clickHandler;a.prototype.bindEvents=ZML.Button.prototype.bindEvents;a.prototype.effect=ZML.Button.prototype.effect;a.prototype.enabled=ZML.Button.prototype.enabled;ZML.Button.prototype.init.call(this);ZML.Button.prototype.initSelfEvents.call(this);ZML.ImageCanvas.prototype.constructComplete.call(this)};return a}();ZML.Label=function(){function a(){this.view=this.view.clone()}a.prototype=new ZML.BasicCanvas;a.prototype.construct=function(a){ZML.BasicCanvas.list.push(this);this.data=a;ZML.BasicCanvas.prototype.mappingCss.call(this,a);this.initEvents();this.text(this.data.attr("text"));ZML.BasicCanvas.prototype.constructComplete.call(this)};a.prototype.initEvents=function(){ZML.BasicCanvas.prototype.initEvents.call(this);var a=this;ZML.BroadcastCenter.addEventListener(ZML.CanvasEvent.prototype.type,function(c,
d){if(!($(d).attr("id")==void 0||$(d).attr("id")!=a.data.attr("id"))){var e=$(d).attr("action");e!=void 0&&e=="set"&&$(d).attr("text")!=void 0&&a.text($(d).attr("text"))}})};a.prototype.text=function(a){a!=void 0&&(a=a.replace(/ /g,"&nbsp;"),this.view.html(a))};return a}();ZML.VideoCanvas=function(){function a(){this.view=this.view.clone();this.video=null}a.prototype=new ZML.BasicCanvas;a.prototype.construct=function(a){var c=this;this.video=$("<video>");this.video.bind("timeupdate",function(){c.update()});this.video.appendTo(this.view);ZML.BasicCanvas.prototype.construct.call(this,a)};a.prototype.update=function(){ZML.BroadcastCenter.sendEvent(this.data.children("onUpdate").prop("outerHTML"));this.video.get(0).ended&&ZML.BroadcastCenter.sendEvent(this.data.children("onComplete").prop("outerHTML"))};
a.prototype.handleSpecialNode=function(a,c){var d=ZML.BasicCanvas.prototype.handleSpecialNode.call(this,a,c);switch(a.toLowerCase()){case "width":this.video.attr(a,c);d=!0;break;case "height":this.video.attr(a,c);d=!0;break;case "src":c=ZML.CoreURL.app+c;this.video.attr(a,c);d=!0;break;case "autoplay":c=="true"?this.video.attr(a,"autoplay"):this.video.removeAttr(a);d=!0;break;case "controls":c=="true"?this.video.attr(a,"controls"):this.video.removeAttr(a);d=!0;break;case "loop":c=="true"?this.video.attr(a,
"loop"):this.video.removeAttr(a);d=!0;break;case "preload":c=="true"?this.video.attr(a,c):this.video.removeAttr(a),d=!0}return d};a.prototype.initEvents=function(){var a=this;ZML.BasicCanvas.prototype.initEvents.call(this);ZML.BroadcastCenter.addEventListener(ZML.VideoEvent.prototype.type,function(c,d){if(!($(d).attr("id")==void 0||$(d).attr("id")!=a.data.attr("id")))switch($(d).attr("action")){case "play":a.video.get(0).play();break;case "pause":a.video.get(0).pause();break;case "stop":a.video.get(0).pause();
a.video.get(0).currentTime=0;break;case "fullScreen":a.video.get(0).webkitRequestFullScreen();break;case "exitFullScreen":document.webkitCancelFullScreen();break;case "set":for(var e=["currentTime","volume","muted"],f=e.length,h=0;h<f;h++){var g=$(d).attr(e[h]);g!=void 0&&(a.video.get(0)[e[h]]=g)}}})};return a}();ZML.Transition={};ZML.Transition.None=function(a,b,c,d){$(b).css("visibility","hidden");$(c).css("visibility","visible");d()};ZML.Transition.None.prototype.dispose=function(){};ZML.TransitionMap={none:ZML.Transition.None};ZML.NavigationManagerBase=function(){function a(){this.transtionInstance=this.eventData=null}a.prototype.init=function(a){this.controller=a;this.children=this.controller.view.children().toArray();var c=this;ZML.BroadcastCenter.addEventListener(ZML.NavigationEvent.prototype.type,function(a,b){c.eventData=b;if(!($(b).attr("controllerId")==void 0||c.controller.data.attr("id")!=$(b).attr("controllerId"))){var f=$(b).attr("showIdx");f=="pre"?c.pre():f=="next"?c.next():c.showIdx(Number(f))}})};a.prototype.pre=
function(){var a=this.controller.defaultIdx;a--;a<0&&(a+=this.children.length);this.showIdx(a)};a.prototype.next=function(){var a=this.controller.defaultIdx;a++;var c=this.children.length;a>=c&&(a-=c);this.showIdx(a)};a.prototype.showIdx=function(a){this.controller.defaultIdx=a};return a}();ZML.DefaultNavigationManager=function(){function a(a){this.init(a)}a.prototype=new ZML.NavigationManagerBase;a.prototype.init=function(a){ZML.NavigationManagerBase.prototype.init.call(this,a);for(var a=this.children.length,c=0;c<a;c++)$(this.children[c]).css("visibility","hidden");$(this.children[this.controller.defaultIdx]).css("visibility","visible")};a.prototype.showIdx=function(a){if(this.controller.defaultIdx!=a){var c=this,d=this.controller.defaultIdx,e=$(this.eventData).attr("effect");e==void 0&&
(e="none");e=ZML.TransitionMap[e];if(e==void 0)e=ZML.TransitionMap.none;if(this.transtionInstance!=null)this.transtionInstance.dispose(),this.transtionInstance=null;this.transtionInstance=new e(this,this.children[d],this.children[a],function(){ZML.BroadcastCenter.sendEvent($(c.eventData).children("onComplete").prop("outerHTML"))});this.controller.defaultIdx=a}};return a}();ZML.BasicNavigationManager=function(){function a(a){this.ct=null;this.init(a)}a.prototype=new ZML.NavigationManagerBase;a.prototype.init=function(a){ZML.NavigationManagerBase.prototype.init.call(this,a);a=this.children.length;this.ct=$("<div>");this.ct.appendTo(this.controller.view);this.ct.css("position","absolute");this.ct.width(a*100+"%");this.ct.height("100%");this.ct.css("display","flex");for(var c=0;c<a;c++){var d=$("<div>");d.css("flex-grow",1);d.css("position","relative");d.appendTo(this.ct);
$(this.children[c]).appendTo(d)}};a.prototype.pre=function(){var a=this.controller.defaultIdx;a--;a>-1&&this.showIdx(a)};a.prototype.next=function(){var a=this.controller.defaultIdx;a++;a<this.children.length&&this.showIdx(a)};a.prototype.showIdx=function(a){var c=-a*100+"%";try{TweenLite.to(this.ct,0.5,{left:c,ease:Expo.easeInOut})}catch(d){this.ct.animate({left:c},500)}this.controller.defaultIdx=a};return a}();ZML.NavigationManagerMap={DefaultNavigationManager:ZML.DefaultNavigationManager,BasicNavigationManager:ZML.BasicNavigationManager};ZML.NavigationController=function(){function a(){this.view=this.view.clone();this.view.css("overflow","hidden");this.defaultIdx=0;this.manager="DefaultNavigationManager";this.managerInstance=null}a.prototype=new ZML.BasicCanvas;a.prototype.constructComplete=function(){this.init();ZML.BasicCanvas.prototype.constructComplete.call(this)};a.prototype.init=function(){if(this.data.attr("defaultIdx")!=void 0)this.defaultIdx=Number(this.data.attr("defaultIdx"));if(this.data.attr("manager")!=void 0)this.manager=
this.data.attr("manager");var a=ZML.NavigationManagerMap[this.manager];if(a!=void 0)this.managerInstance=new a(this)};return a}();ZML.FactoryMap={BASICCANVAS:ZML.BasicCanvas,BASICCOMPONENT:ZML.BasicComponent,HTMLCANVAS:ZML.HtmlCanvas,NAVIGATIONCONTROLLER:ZML.NavigationController,IMAGECANVAS:ZML.ImageCanvas,BUTTON:ZML.Button,CANVASEVENT:ZML.CanvasEvent,NAVIGATIONEVENT:ZML.NavigationEvent,IMAGEBUTTON:ZML.ImageButton,EVENTS:ZML.Events,LABEL:ZML.Label,BASICMOVIECLIP:ZML.BasicMovieClip,MOVIECLIPEVENT:ZML.MovieClipEvent,IMAGEASSET:ZML.ImageAsset,VIDEOCANVAS:ZML.VideoCanvas,VIDEOEVENT:ZML.VideoEvent};
