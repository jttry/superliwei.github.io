var ZUI={};ZUI.Lang={};ZUI.Lang.render=function(c){this.findItems(c).each(function(){var b=$(this).attr("data-lang"),b=b.substr(1,b.length-2);$(this).text(eval(b))})};ZUI.Lang.findItems=function(c){return c==void 0?$("*[data-lang^='{'][data-lang$='}']"):c.find("*[data-lang^='{'][data-lang$='}']")};ZUI.Accordion=function(c){var b=this;this.view=c.view;c=this.view.find("> .title");this.view.find("> .content");c.click(function(){var a=$(this);if(!a.hasClass("active")){var d=b.view.find("> .title.active");d.length>0&&(d.removeClass("active"),d.next().removeClass("active"));a!=null&&(a.addClass("active"),a.next().addClass("active"))}})};ZUI.CheckBox=function(c){var b=this;this.view=c.view;this.box=$("<div class='box'>");this.box.appendTo(this.view);this.check=$("<div class='check'>&radic;</div>");this.check.appendTo(this.view);this.box.click(function(){b.check.toggle();b.view.trigger(ZUI.Input.CHANGE)});this.getValue=function(){return b.check.css("display")=="block"};this.setValue=function(a){b.check[a?"show":"hide"]()}};ZUI.CheckBox.CHANGE="ZUI_CheckBox_Change";ZUI.ComboBox=function(c){function b(a){d.label.attr("data-lang",a.data("lang"));ZUI.Lang.render(d.box);e=a}function a(a){a&&a.target===d.box.get(0)||(d.box.removeClass("dropdown"),d.list.hide())}var d=this,e=null;this.view=c.view;this.box=$("<div class='box'>");this.box.appendTo(this.view);this.label=$("<div class='label'>");this.label.appendTo(this.box);this.arrow=$("<div class='arrow'><div class='icon'></div></div>");this.arrow.appendTo(this.box);this.list=this.view.find(".list");this.list.find(".item").each(function(){$(this).mousedown(function(a){a.stopPropagation()});
$(this).click(function(){a();var c=$(this);e!==c&&(b(c),d.view.trigger(ZUI.ComboBox.CHANGE))})});this.box.click(function(){d.box.addClass("dropdown");d.list.show()});$(document).on("mousedown",a);this.view.on(ZUI.ComboBox.DISPOSE,function(){d.dispose()});this.getValue=function(){return e==null?void 0:e.data("value")};this.setValue=function(a){a=this.list.find(".item[data-value="+a+"]");b(a)};this.dispose=function(){$(document).off("mousedown",a)}};ZUI.ComboBox.CHANGE="ZUI_ComboBox_Change";
ZUI.ComboBox.DISPOSE="ZUI_ComboBox_Dispose";ZUI.Input=function(c){var b=this;this.view=c.view;this.input=$("<input type='text'>");this.input.appendTo(this.view);this.getValue=function(){return b.input.val()};this.setValue=function(a){this.input.val(a)};this.input.change(function(){b.view.trigger(ZUI.Input.CHANGE,b.input.val())})};ZUI.Input.CHANGE="ZUI_Input_Change";ZUI.Menu=function(c){function b(b){var c=b.find(".arrow");c.length==0&&(c=$('<div class="arrow">'),c.appendTo(b),b.find(">.menu").length>0&&$('<i class="icon-caret-right"></i>').appendTo(c));var g=this;b.mouseover(function(){d!==g&&(d!=void 0&&(d.hideMenu(),d=void 0),g.showMenu(),d=g)});b.click(function(){if(!b.hasClass("disabled")&&!(b.find(">.menu").length>0)){var c=a.view.data("owner");c.hideMenu();c.view.trigger(ZUI.Menu.ITEM_CLICK,b)}});this.showMenu=function(){if(!b.hasClass("disabled")){var c=
b.find(">.menu");if(c.length>0)b.addClass("selected"),a.view.data("owner").view.trigger(ZUI.Menu.OPEN,c),this.menu=new ZUI.Menu({view:c.clone()}),this.menu.view.data("owner",a.view.data("owner")),this.menu.view.css("display","block"),this.menu.view.appendTo("body"),this.menu.view.offset({left:b.offset().left+b.width(),top:b.offset().top})}};this.hideMenu=function(){if(this.menu!=void 0)b.removeClass("selected"),this.menu.view.remove(),this.menu.hideSubMenu(),this.menu=void 0}}var a=this;this.view=
c.view;this.view.find(">.item").each(function(){new b($(this))});var d;this.hideSubMenu=function(){d!=void 0&&d.hideMenu()}};ZUI.Menu.OPEN="ZUI_Menu_Open";ZUI.Menu.ITEM_CLICK="ZUI_Menu_ItemClick";ZUI.MenuBar=function(c){function b(b){f&&e!==b&&(e!=void 0&&(e.hideMenu(),e=void 0),b!=null&&b.showMenu(),e=b)}function a(a){var c=this;a.mousedown(function(){f||(f=!0,b(c))});a.mouseover(function(){b(c)});this.showMenu=function(){var b=a.find(">.menu");if(b.length>0)a.addClass("selected"),d.view.trigger(ZUI.Menu.OPEN,b),this.menu=new ZUI.Menu({view:b.clone()}),this.menu.view.data("owner",d),this.menu.view.css("display","block"),this.menu.view.appendTo("body"),this.menu.view.offset({left:a.offset().left,
top:a.offset().top+a.height()})};this.hideMenu=function(){if(this.menu!=void 0)a.removeClass("selected"),this.menu.view.remove(),this.menu.hideSubMenu(),this.menu=void 0}}this.view=c.view;this.view.find(">.item").each(function(){new a($(this))});var d=this;$(document).mousedown(function(b){b=$(b.target).parent();!b.hasClass("zui menubar")&&!b.parent().hasClass("zui menubar")&&(b.hasClass("zui menu")&&b.data("owner")===d||d.hideMenu())});var e,f=!1;this.hideMenu=function(){b(null);f=!1}};ZUI.PopWin=function(c){var b=this;this.view=c.view;this.view.find(".titleBar .remove").click(function(){b.hide()});var a=$("<div class='zui mask'></div>");this.show=function(){a.insertBefore(this.view);this.view.css("display","flex");this.view.css("left","calc(50% - "+this.view.outerWidth()*0.5+"px)");this.view.css("top","calc(50% - "+this.view.outerHeight()*0.5+"px)")};this.hide=function(){this.view.css("display","none");a.remove()}};ZUI.Slider=function(c){var b=this;this.view=c.view;this.value=c.value!=void 0?c.value:0;this.min=c.min!=void 0?c.min:0;this.max=c.max!=void 0?c.max:1;this.bar=$("<div class='bar'>");this.bar.appendTo(this.view);this.overBar=$("<div class='overBar'>");this.overBar.appendTo(this.view);this.dragger=$("<div class='dragger'><div class='box'></div></div>");this.dragger.appendTo(this.overBar);this.bar.click(function(a){a=a.clientX-$(this).offset().left;a=b.getValueByDraggerLeft(a);b.setValue(a);b.view.trigger(ZUI.Slider.CHANGE)});
this.dragger.mousedown(function(a){function c(a){a.preventDefault();h=!0;var a=g+a.pageX-f,d=b.bar.outerWidth(),a=a<0?0:a,a=b.getValueByDraggerLeft(a>d?d:a);b.setValue(a);b.view.trigger(ZUI.Slider.UPDATE)}function e(){$(document).off("mousemove",c);$(document).off("mouseup",e);h&&b.view.trigger(ZUI.Slider.CHANGE)}var f=a.pageX,g=parseInt(b.dragger.css("left")),h=!1;$(document).on("mousemove",c);$(document).on("mouseup",e)});this.getValueByDraggerLeft=function(a){a/=b.bar.outerWidth();a=b.min+(b.max-
b.min)*a;return a=a.toFixed(2)};this.getValue=function(){return this.value};this.setValue=function(a){this.dragger.css("left",(a-this.min)/(this.max-this.min)*100+"%");this.value=a};this.setValue(this.value)};ZUI.Slider.UPDATE="ZUI_Slider_Update";ZUI.Slider.CHANGE="ZUI_Slider_Change";ZUI.TextArea=function(c){var b=this;this.view=c.view;this.textArea=$("<textarea>");this.textArea.appendTo(this.view);this.getValue=function(){return this.textArea.val()};this.setValue=function(a){this.textArea.val(a)};this.textArea.change(function(){b.view.trigger(ZUI.TextArea.CHANGE)})};ZUI.TextArea.CHANGE="ZUI_TextArea_Change";ZUI.ColorPicker=function(c){var b=this;this.view=c.view;var a=$("<div class='box'>");a.appendTo(this.view);a.colorPicker({animationSpeed:0,renderCallback:function(a,c){c!=!0&&(c==!1?b.view.trigger(ZUI.ColorPicker.SUBMIT):c==void 0&&b.view.trigger(ZUI.ColorPicker.CHANGE))}});this.getValue=function(){return a.val()};this.setValue=function(b){a.val(b);a.css("background-color",b)};this.setValue(c.color||"#000")};ZUI.ColorPicker.CHANGE="ZUI_ColorPicker_Change";ZUI.ColorPicker.SUBMIT="ZUI_ColorPicker_Submit";(function(){function c(a){$.fn[a]=function(){var c=[];this.each(function(){var f=$(this);f.data("instance",f.data("instance")||new b[a]({view:f}));c.push(f.data("instance"))});if(c.length!=0){if(c.length==1)return c[0];return c}}}var b={zui_combobox:ZUI.ComboBox,zui_accordion:ZUI.Accordion,zui_checkbox:ZUI.CheckBox,zui_input:ZUI.Input,zui_textarea:ZUI.TextArea,zui_menubar:ZUI.MenuBar,zui_slider:ZUI.Slider,zui_popwin:ZUI.PopWin,zui_colorpicker:ZUI.ColorPicker},a;for(a in b)new c(a)})();
$(function(){$(".zui.combobox").zui_combobox();$(".zui.accordion").zui_accordion();$(".zui.checkbox").zui_checkbox();$(".zui.input").zui_input();$(".zui.textarea").zui_textarea();$(".zui.menubar").zui_menubar();$(".zui.slider").zui_slider();$(".zui.popwin").zui_popwin();$(".zui.colorpicker").zui_colorpicker();ZUI.Lang.render()});
